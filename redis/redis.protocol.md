# RESP

字符串的协议，标记了类型，数据长度信息。

1. strings
2. integers
3. arrays
4. errors



数据类型依赖首个字节。

1. 单行字符串，首字节`+`
2. 多行字符串，首字节`$`
3. integers，首字节`:`
4. errors，首字节`-`
5. arrays，首字节`*`

总是以`\r\n`结束。

## 单行字符串

1. `+`号后面跟一个非换行的字符串，以`\r\n`结束

**如下示例**

```
+OK\r\n
```

实际内容应该去掉`+`和`\r\n`。

## 多行字符串类型

1. `$`号开始，后面是一个数字，代表这个多行字符串的长度，然后是`\r\n`
2. 接着是正常的字符串内容
3. 最后结束用`\r\n`

**示例**

```
$6\r\nfoonbar\r\n
```

长度为6个字符的多行字符串。

```
$0\r\n\r\n
```

表示一个空的多行字符串。

## 错误类型

1. `-`号后面就是错误本身的信息（其实就是一个字符串）和普通的[单行字符串](#单行字符串)是一样的，
区别就是，实现的<ins>客户端</ins>会把这样的数据当成错误或异常处理

**如下示例**

```
-这里是一个错误信息\r\n
```

<ins>客户端</ins>应该实现为一个错误或异常类型。

## 整数类型

1. `:`号开始，后面根着一个数字，以`\r\n`结束，数字并没有什么特别的意义，但也可以用`1`表示`true`，`0`表示`false`

**如下示例**

```
:1000\r\n
```

也可以返回`1`和`0`来表示`true`和`false`，比如redis一些命令`EXIST`返回`1`表示存在，`0`表示不存在。

## 数组类型

1. `*`号之后，跟着一个数字，表示数组元素个数，然后是`\r\n`
2. 接着是加上元素本身数据的表示，比如是[单行客串](#单行字符串)或[integer](#整数类型)

**示例**

```
*0\r\n
```

这样表示一个空数组，没有任何元素。

```
*2\r\n$3\r\nfoo\r\n$3\r\nbar\r\n
```

表示一个有2个元素的数组。

1. 为一个多行字符串
2. 为一个多行字符串

```
*3\r\n:1\r\n:2\r\n:3\r\n
```

表示有3个元素，后面跟着的就是数据本身，示例中的都是数字类型


```
*3\r\n:3\r\n+OK\r\n$3\r\rOKK\r\n
```

表示有3个元素，元素可以不是统一的类型

1. 第一个元素是一个数字类型
2. 第二个元素是一个单行字符串
3. 第三个元素是一个多行字符串


```
*2\r\n*3\r\n:3\r\n:2\r\n:1\r\n*2\r\n+OK\r\n$3\r\nOKK\r\n
```

表示有2个元素，元素还可以是一个数组

1. 第一个元素是一个数组
    1. 每个元素都是一个数字类型
2. 第二个元素也是一个数组
    1. 第一个元素是单行字符串
    2. 第二个元素是一个多行字符串